# MCP 산출물 생성 테스트 시나리오

> 업무 규칙이 복잡하고 의사결정 로직이 포함된 커머스 기능 목록

---

## 1. 회원 포인트 적립 및 차감 규칙 시스템

### 사용 예시
```
@figure-mcp 회원 포인트 적립 및 차감 규칙 시스템 프로그램설계서(온라인) 작성해줘.
```

### 요구사항
- **기본 적립률**: 결제금액의 1% (등급별 차등 적용)
- **회원 등급별 적립률**: 일반 1%, 실버 2%, 골드 3%, VIP 5%
- **포인트 적립 수식**: `FLOOR(결제금액 × 적립률 × (1 + 이벤트추가율))`
- **추가 적립 조건**:
  - 첫 구매: +5,000P
  - 일반 리뷰 작성: +500P
  - 사진 리뷰 작성: +1,000P
  - 월간 구매 3회 이상: +2,000P 보너스
- **포인트 사용 제한**:
  - 최대 결제금액의 30%까지 사용 가능
  - 최소 사용 단위: 1,000원
  - 최소 주문금액: 10,000원 이상일 때만 사용 가능
- **포인트 소멸 규칙**:
  - 적립일로부터 1년 후 자동 소멸
  - 만료 30일 전 이메일/SMS 알림 발송
  - 소멸 예정 포인트 우선 사용 안내
- **차감 우선순위**: 소멸 임박 포인트 → 일반 포인트 → 이벤트 포인트
- **포인트 이력 관리**: 적립/차감/소멸 내역 상세 조회 및 사유 기록
- **주문 취소 시 포인트 복구**: 사용된 포인트는 즉시 복구, 적립 예정 포인트는 취소

### 업무적 의사결정 포인트
- 등급별 차등 적립률 정책
- 이벤트 중복 적용 시 우선순위
- 포인트 소멸 시점 및 알림 타이밍
- 부정 사용 방지를 위한 제한 규칙

---

## 2. 주문 배송비 자동 계산 시스템

### 사용 예시
```
@figure-mcp 주문 배송비 자동 계산 시스템 요구사항명세서 작성해줘.
```

### 요구사항
- **기본 배송비**: 3,000원 (주문금액 30,000원 이상 무료)
- **지역별 추가 배송비**:
  - 제주도: +3,000원
  - 도서산간: +5,000원
  - 제주 도서산간: +8,000원
- **상품 특성별 배송비**:
  - 냉장/냉동 상품: 별도 배송비 5,000원 (합산 불가)
  - 대형 가전: 별도 배송비 10,000원 + 설치비 20,000원 (선택)
  - 가구류: 별도 배송비 15,000원 + 조립비 30,000원 (선택)
- **무게별 추가 요금**:
  - 5kg 이하: 기본 배송비
  - 5kg 초과: 1kg당 500원 추가
  - 최대 중량: 30kg (초과 시 배송 불가)
- **묶음 배송 할인**:
  - 동일 판매자 2개 이상 주문: 배송비 50% 할인
  - 동일 판매자 5개 이상 주문: 배송비 무료
- **배송 옵션별 추가 요금**:
  - 새벽 배송 (04:00~07:00): +5,000원
  - 지정일 배송: +2,000원
  - 당일 배송: +3,000원 (주문 시간 12시 이전)
- **배송비 계산 수식**:
  ```
  최종배송비 = FLOOR((기본배송비 + 지역추가금 + 무게추가금 + 옵션비 - 할인금액) / 100) × 100
  ```
- **특수 규칙**:
  - 최종 배송비는 100원 단위 절사
  - 무료배송 쿠폰 사용 시 기본 배송비만 면제 (지역 추가금은 청구)
  - 배송비 미리보기 기능 제공 (주소 입력 시 실시간 계산)

### 업무적 의사결정 포인트
- 지역별 배송비 차등화 정책
- 상품 특성별 배송 방식 결정
- 묶음 배송 할인 기준
- 옵션 배송의 추가 비용 산정

---

## 3. 프로모션 중복 적용 우선순위 시스템

### 사용 예시
```
@figure-mcp 프로모션 중복 적용 우선순위 시스템 프로그램설계서(온라인) 작성해줘.
```

### 요구사항
- **적용 가능한 할인 유형**:
  - 쿠폰 할인 (정액/정률)
  - 회원 등급 할인 (VIP 5%, 골드 3%)
  - 상품 할인 (기획전, 특가)
  - 카테고리 할인
  - 첫 구매 할인 (10%)
  - 앱 전용 할인 (5%)
- **중복 적용 규칙**:
  - 최대 3개 할인 동시 적용 가능
  - 정액 할인 최대 2개, 정률 할인 최대 2개
  - 같은 종류 할인은 큰 금액 우선 적용
- **적용 우선순위**:
  1. 상품 할인 (가장 먼저 적용)
  2. 쿠폰 할인
  3. 회원 등급 할인
  4. 카테고리 할인
  5. 기타 이벤트 할인
- **할인율 계산 방식**:
  - 정액 할인: 순차 차감
  - 정률 할인: 이전 할인 적용 후 금액 기준으로 계산
  - 예시: `(원가 - 정액할인A - 정액할인B) × (1 - 정률할인C%) × (1 - 정률할인D%)`
- **최대 할인 한도**:
  - 총 할인율 최대 70%
  - 총 할인 금액 최대 500,000원
  - 최종 결제 금액 최소 1,000원 이상 유지
- **특수 규칙**:
  - VIP 회원: 최대 4개 할인 적용 가능
  - 특정 브랜드 상품: 추가 할인 불가 플래그
  - 쿠폰 발급 조건 확인 (최소 주문 금액, 특정 카테고리)
- **할인 적용 시뮬레이션**: 체크아웃 전 최적 할인 조합 추천

### 업무적 의사결정 포인트
- 할인 중복 적용의 순서와 조합
- 최대 할인 한도 설정 기준
- 특정 상품/브랜드 제외 정책
- 최적 할인 조합 추천 알고리즘

---

## 4. 동적 가격 책정 시스템 (Dynamic Pricing)

### 사용 예시
```
@figure-mcp 동적 가격 책정 시스템 프로그램설계서(온라인) 작성해줘.
```

### 요구사항
- **가격 변동 요인**:
  - 재고 수량 (재고율 20% 미만 시 가격 인상)
  - 수요 예측 (최근 7일 판매량 기반)
  - 시간대별 수요 (피크 타임 vs 비수기)
  - 경쟁사 가격 (크롤링 데이터 기반)
  - 계절/요일 (주말/공휴일 가격 변동)
- **가격 조정 수식**:
  ```
  조정가격 = 기준가격 × (1 + 재고계수 + 수요계수 + 시간계수 + 경쟁계수)
  ```
  - 재고계수: 재고율 20% 미만 +10%, 10% 미만 +20%
  - 수요계수: 전주 대비 판매량 50% 증가 시 +5%, 100% 증가 시 +10%
  - 시간계수: 피크 타임 +5%, 심야 시간 -5%
  - 경쟁계수: 경쟁사 대비 낮으면 +3%, 높으면 -3%
- **가격 변동 제한**:
  - 1회 최대 변동폭: ±15%
  - 일일 최대 변동 횟수: 3회
  - 최소/최대 가격 범위: 기준가의 70% ~ 150%
- **가격 고정 예외**:
  - 프로모션 진행 중인 상품
  - 계약 단가가 정해진 상품
  - 신상품 출시 후 7일간
- **가격 변경 알림**:
  - 관심 상품 등록 고객에게 가격 하락 시 알림
  - 장바구니 담은 상품 가격 변동 시 체크아웃 화면에 표시
- **이력 관리**:
  - 모든 가격 변동 이력 기록 (변동 사유, 이전 가격, 변경 시각)
  - 가격 변동 추이 그래프 제공

### 업무적 의사결정 포인트
- 가격 변동 알고리즘 및 계수 산정
- 가격 변동의 최대/최소 범위 결정
- 실시간 가격 조정 vs 배치 처리 선택
- 고객 신뢰도와 수익성의 균형

---

## 5. 회원 등급 자동 승급/강등 시스템

### 사용 예시
```
@figure-mcp 회원 등급 자동 승급/강등 시스템 테이블명세서 작성해줘.
```

### 요구사항
- **등급 체계**: 일반 → 실버 → 골드 → VIP → VVIP
- **승급 조건** (최근 6개월 기준):
  - **실버**: 구매 금액 100만원 이상 OR 구매 횟수 5회 이상
  - **골드**: 구매 금액 300만원 이상 AND 구매 횟수 10회 이상
  - **VIP**: 구매 금액 1,000만원 이상 AND 구매 횟수 20회 이상 AND 리뷰 작성 10개 이상
  - **VVIP**: 구매 금액 3,000만원 이상 AND 구매 횟수 50회 이상 AND 추천인 가입 5명 이상
- **강등 조건**:
  - 최근 6개월 구매 내역이 없는 경우 1단계 강등
  - 최근 12개월 구매 내역이 없는 경우 일반 등급으로 강등
  - 반품률 30% 이상인 경우 1단계 강등 (악성 반품 방지)
- **등급별 혜택**:
  - **일반**: 기본 포인트 1% 적립
  - **실버**: 포인트 2% 적립, 생일 쿠폰 5,000원
  - **골드**: 포인트 3% 적립, 생일 쿠폰 10,000원, 무료 배송 쿠폰 월 2회
  - **VIP**: 포인트 5% 적립, 생일 쿠폰 30,000원, 무료 배송 쿠폰 무제한, 전담 CS
  - **VVIP**: 포인트 7% 적립, 생일 쿠폰 100,000원, 모든 배송비 무료, VIP 라운지 이용
- **등급 평가 주기**: 매월 1일 00:00 배치 작업으로 자동 평가
- **등급 변동 알림**: 승급/강등 시 이메일 및 앱 푸시 알림
- **유예 기간**: 강등 대상자에게 1개월 유예 기간 부여 (구매 시 강등 취소)
- **특별 등급 유지**: VVIP는 1년간 구매 내역 없어도 등급 유지

### 업무적 의사결정 포인트
- 등급별 승급 기준의 합리성
- 강등 조건 및 유예 기간 설정
- 등급별 혜택의 차등화 전략
- 반품률 등 부정 사용 패턴 감지

---

## 6. 재고 부족 시 주문 우선순위 배정 시스템

### 사용 예시
```
@figure-mcp 재고 부족 시 주문 우선순위 배정 시스템 프로그램설계서(온라인) 작성해줘.
```

### 요구사항
- **재고 부족 상황 정의**: 
  - 현재 재고 < 대기 중인 주문 수량
  - 예상 입고일까지 3일 이상 소요
- **주문 우선순위 계산 수식**:
  ```
  우선순위 점수 = (회원등급점수 × 3) + (주문금액점수 × 2) + (주문시각점수 × 1) + (재주문여부 × 5) - (반품이력점수 × 2)
  ```
  - **회원등급점수**: VVIP(50), VIP(40), 골드(30), 실버(20), 일반(10)
  - **주문금액점수**: 금액 / 10,000 (최대 50점)
  - **주문시각점수**: 선착순 (1~100등까지 100~1점)
  - **재주문여부**: 동일 상품 구매 이력 있으면 +50점
  - **반품이력점수**: 최근 6개월 반품 건수 × 10점 (감점)
- **배정 프로세스**:
  1. 재고 부족 감지 시 대기 주문 목록 생성
  2. 우선순위 점수 자동 계산
  3. 높은 점수 순으로 재고 배정
  4. 배정 실패 주문은 "입고 대기" 상태로 전환
- **입고 예약 시스템**:
  - 재고 부족 상품에 대해 입고 예약 접수
  - 예약 순서도 우선순위 점수 기반
  - 입고 시 자동 주문 생성 및 결제 진행
- **고객 안내**:
  - 재고 부족 시 예상 입고일 및 순위 안내
  - 입고 예약 시 우선순위 점수 공개 (투명성)
  - 순위 상승 시 알림 발송
- **긴급 발주 트리거**:
  - 대기 주문 금액 합계가 500만원 이상이면 자동 긴급 발주
  - VIP 이상 고객 3명 이상 대기 시 긴급 발주

### 업무적 의사결정 포인트
- 우선순위 계산 알고리즘 및 가중치
- 재고 배정의 공정성과 수익성 균형
- 긴급 발주 트리거 기준
- 고객 안내 정보의 투명성 수준

---

## 7. 반품/환불 자동 승인 규칙 시스템

### 사용 예시
```
@figure-mcp 반품/환불 자동 승인 규칙 시스템 인터페이스명세서 작성해줘.
```

### 요구사항
- **반품 가능 기간**:
  - 일반 상품: 배송 완료 후 7일 이내
  - 신선/냉장 식품: 배송 완료 후 1일 이내
  - 주문 제작 상품: 반품 불가
  - VIP 이상 회원: 배송 완료 후 30일 이내
- **자동 승인 조건**:
  - 단순 변심 + 미개봉 + 7일 이내 + 금액 5만원 이하 → 즉시 자동 승인
  - 상품 하자 + 사진 첨부 + 3일 이내 → 즉시 자동 승인
  - 배송 지연 (3일 이상) → 즉시 자동 승인 + 배송비 환불
- **수동 검토 대상**:
  - 금액 10만원 이상
  - 사용 흔적이 있는 상품
  - 동일 상품 3회 이상 반품 이력
  - 특정 카테고리 (전자기기, 명품)
- **환불 금액 계산**:
  ```
  환불금액 = 결제금액 - 배송비(단순변심) - 재포장비 - 할인복원금액
  ```
  - **단순 변심**: 왕복 배송비 고객 부담 (6,000원)
  - **상품 하자**: 전액 환불 + 왕복 배송비 환불
  - **재포장비**: 개봉 상품 1,000원, 사용 상품 3,000원
  - **할인복원**: 구매 금액 기반 할인 쿠폰 사용 시, 할인 금액 차감
- **환불 방법 우선순위**:
  1. 원결제수단 환불 (카드 취소, 계좌 환불)
  2. 포인트 환불 (고객 동의 시)
  3. 에스크로 환불 (PG사 경유)
- **환불 처리 기간**:
  - 자동 승인: 즉시 환불 처리 (카드사 영업일 기준 3~5일)
  - 수동 승인: 검토 후 2영업일 이내
  - 반품 상품 회수 후: 회수 확인 후 1영업일 이내
- **악성 반품 방지**:
  - 반품률 30% 이상 회원: 자동 승인 제외
  - 동일 상품 재구매 후 반복 반품: 블랙리스트 등록
  - 시즌 종료 직전 대량 반품: 수동 검토

### 업무적 의사결정 포인트
- 자동 승인 vs 수동 검토 기준선
- 반품 사유별 환불 금액 차등화
- 악성 반품 탐지 알고리즘
- 고객 만족과 손실 방지의 균형

---

## 8. 품절 상품 재입고 알림 우선순위 시스템

### 사용 예시
```
@figure-mcp 품절 상품 재입고 알림 우선순위 시스템 요구사항명세서 작성해줘.
```

### 요구사항
- **알림 신청 조건**:
  - 품절 상품 상세 페이지에서 "재입고 알림 신청" 버튼 클릭
  - 회원만 신청 가능 (비회원은 이메일 입력)
  - 1개 상품당 1회만 신청 가능
- **알림 발송 우선순위**:
  ```
  우선순위 점수 = (회원등급 × 5) + (관심도 × 3) + (구매이력 × 10) + (신청시각 × 1)
  ```
  - **회원등급**: VVIP(10), VIP(8), 골드(6), 실버(4), 일반(2)
  - **관심도**: 상품 조회수, 찜 여부, 장바구니 추가 여부 (0~10점)
  - **구매이력**: 동일/유사 상품 구매 이력 있으면 +50점
  - **신청시각**: 선착순 (1~1000등까지 1000~1점)
- **알림 발송 방식**:
  - 재입고 수량의 30%까지: SMS + 앱 푸시 (즉시)
  - 재입고 수량의 70%까지: 이메일 + 앱 푸시 (30분 지연)
  - 재입고 수량 초과: 이메일만 발송 (다음 입고 예정일 안내)
- **알림 발송 제한**:
  - 최초 입고 시간 기준 24시간 내 1회만 발송
  - 소량 입고 (10개 이하) 시 VIP 이상만 발송
  - 대량 입고 (100개 이상) 시 전체 발송
- **구매 전환 추적**:
  - 알림 발송 후 구매 여부 추적
  - 미구매자는 다음 입고 시 우선순위 하락 (-10점)
  - 구매 완료자는 알림 목록에서 자동 제거
- **자동 신청 취소**:
  - 알림 발송 후 3일간 미구매 시 자동 취소
  - 동일 카테고리 다른 상품 구매 시 자동 취소
  - 알림 신청 후 6개월 경과 시 자동 취소

### 업무적 의사결정 포인트
- 알림 발송 우선순위 알고리즘
- 입고 수량 대비 알림 발송 비율
- VIP 우대와 공정성의 균형
- 알림 효율성 측정 및 최적화

---

## 9. 대량 구매 견적 자동 산출 시스템

### 사용 예시
```
@figure-mcp 대량 구매 견적 자동 산출 시스템 프로그램설계서(배치) 작성해줘.
```

### 요구사항
- **대량 구매 기준**:
  - 단일 상품 50개 이상
  - 총 주문 금액 500만원 이상
  - 동일 카테고리 상품 10종 이상
- **할인율 산출 수식**:
  ```
  할인율 = 기본할인율 + 수량할인율 + 금액할인율 + 협상여지율
  ```
  - **기본할인율**: 5% (대량 구매 기본 혜택)
  - **수량할인율**: 
    - 50~99개: +3%
    - 100~499개: +7%
    - 500개 이상: +12%
  - **금액할인율**:
    - 500~999만원: +2%
    - 1,000~4,999만원: +5%
    - 5,000만원 이상: +10%
  - **협상여지율**: 최대 5% (영업 담당자 승인 필요)
- **최종 할인율 제한**: 최대 30%
- **견적서 자동 생성 항목**:
  - 상품별 단가, 수량, 소계
  - 총 주문 금액
  - 할인율 및 할인 금액
  - 부가세 별도 표기
  - 배송비 (무료 or 착불)
  - 결제 조건 (선결제, 후불, 분할 결제)
  - 납품 일정
  - 유효 기간 (견적서 발행일로부터 7일)
- **결제 조건 분기**:
  - 1,000만원 미만: 선결제만 가능
  - 1,000만원 이상: 선결제 OR 납품 후 7일 이내 결제
  - 5,000만원 이상: 계약금 30% + 납품 후 70% 분할 결제 가능
- **재고 확인 및 리드타임**:
  - 현재 재고로 충족 가능: 즉시 출고 가능
  - 부분 재고: 분할 납품 일정 제시
  - 재고 부족: 발주 후 예상 리드타임 제시 (2~4주)
- **승인 프로세스**:
  - 1,000만원 미만: 시스템 자동 승인
  - 1,000~5,000만원: 팀장 승인 필요
  - 5,000만원 이상: 임원 승인 필요

### 업무적 의사결정 포인트
- 수량/금액별 할인율 체계
- 결제 조건 및 분할 결제 정책
- 승인 권한 및 결재 라인
- 재고 부족 시 대응 방안

---

## 10. 정기 구독 결제 및 자동 갱신 시스템

### 사용 예시
```
@figure-mcp 정기 구독 결제 및 자동 갱신 시스템 프로그램설계서(온라인) 작성해줘.
```

### 요구사항
- **구독 상품 유형**:
  - 월간 구독: 매월 정해진 날짜에 배송
  - 주간 구독: 매주 정해진 요일에 배송
  - 격주 구독: 2주마다 배송
  - 커스텀 구독: 고객이 배송 주기 선택 (15일, 20일 등)
- **구독 할인**:
  - 1개월 구독: 정가의 5% 할인
  - 3개월 구독: 정가의 10% 할인 + 첫 배송비 무료
  - 6개월 구독: 정가의 15% 할인 + 모든 배송비 무료
  - 12개월 구독: 정가의 20% 할인 + 모든 배송비 무료 + 웰컴 기프트
- **자동 결제 처리**:
  - 배송일 3일 전 자동 결제 시도
  - 결제 실패 시 1일 간격으로 3회 재시도
  - 3회 실패 시 구독 일시 정지 + 고객 알림
- **결제 실패 사유별 처리**:
  - 잔액/한도 부족: 다음날 재시도 + SMS 알림
  - 카드 정지/만료: 즉시 구독 정지 + 결제수단 변경 요청
  - 기타 오류: 고객센터 연락 요청
- **구독 변경 정책**:
  - 상품 변경: 다음 결제일부터 적용
  - 수량 변경: 다음 결제일부터 적용
  - 주기 변경: 즉시 적용 (다음 배송일 재계산)
  - 결제수단 변경: 즉시 적용
- **구독 해지 정책**:
  - 언제든 해지 가능 (위약금 없음)
  - 해지 시점: 다음 결제일 전날까지 유효
  - 이미 결제된 건은 환불 불가 (배송 진행)
  - 해지 사유 수집 (개선 목적)
- **구독 혜택**:
  - 구독 회차별 추가 할인 (5회차: +2%, 10회차: +5%)
  - 구독자 전용 상품 구매 가능
  - 생일 월 무료 배송
  - 리뷰 작성 시 다음 결제 1,000원 할인
- **배송 스킵 기능**:
  - 다음 배송 1회 스킵 가능 (월 1회 제한)
  - 스킵 시 결제 없음, 다음 배송일로 연기
  - 스킵 신청 기한: 배송 예정일 5일 전까지

### 업무적 의사결정 포인트
- 구독 기간별 할인율 차등화
- 자동 결제 실패 시 재시도 정책
- 구독 변경/해지 시점 및 환불 규정
- 구독 유지율 향상을 위한 혜택 설계

---

## 활용 방법

1. **MCP 서버 실행 확인**
2. **위 시나리오 중 하나를 선택하여 명령어 실행**
3. **생성된 산출물로 RAG 데이터 구축**
4. **업무 규칙 학습 및 의사결정 로직 검증**

## 특징

- ✅ **복잡한 비즈니스 로직**: 단순 CRUD가 아닌 실제 업무 규칙 포함
- ✅ **의사결정 포인트 명확화**: 각 시나리오마다 업무적 판단이 필요한 지점 표시
- ✅ **계산 수식 포함**: 금액, 할인율, 우선순위 등 계산 로직 명시
- ✅ **예외 처리 시나리오**: 정상 케이스 외 다양한 예외 상황 포함
- ✅ **우선순위 및 정책**: 순서, 우선순위, 제한 규칙 등 정책 결정 필요 사항 포함
